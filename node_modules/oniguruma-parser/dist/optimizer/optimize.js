"use strict";import{toOnigurumaAst as p}from"../index.js";import{generate as l}from"../generator/generate.js";import{traverse as u}from"../traverser/traverse.js";import{optimizations as m}from"./optimizations.js";function g(t,e){const o=O(e),s=p(t,{flags:o.flags,rules:o.rules}),i=Object.assign(f(),o.override);Object.keys(i).forEach(n=>{i[n]||delete i[n]});const a=Object.keys(i);let r={pattern:t},c=0;do{if(++c>200)throw new Error("Optimization exceeded maximum iterations; possible infinite loop");t=r.pattern;for(const n of a)u(s,m.get(n));r=l(s)}while(t!==r.pattern);return r}function O(t={}){return{flags:"",override:{},rules:{},...t}}function f({disable:t}={}){const e={};for(const o of m.keys())e[o]=!t;return e}export{f as getOptionalOptimizations,g as optimize};
//# sourceMappingURL=optimize.js.map
