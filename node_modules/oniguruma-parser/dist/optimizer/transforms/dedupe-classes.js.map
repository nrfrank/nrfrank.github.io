{
  "version": 3,
  "sources": ["../../../src/optimizer/transforms/dedupe-classes.js"],
  "sourcesContent": ["import {NodeCharacterClassKinds, NodeTypes} from '../../parser/parse.js';\n\n/**\nRemove duplicate characters, sets, and ranges from character classes.\n*/\nconst dedupeClasses = {\n  CharacterClass({node}) {\n    const {kind, elements} = node;\n    if (kind !== NodeCharacterClassKinds.union) {\n      return;\n    }\n    const keep = [];\n    for (const el of elements) {\n      // Preserve the order; ignore formatting differences\n      if (\n        ( el.type === NodeTypes.Character &&\n          keep.some(k => (\n            k.type === el.type &&\n            k.value === el.value\n          ))\n        ) ||\n        ( el.type === NodeTypes.CharacterSet &&\n          keep.some(k => (\n            k.type === el.type &&\n            k.kind === el.kind &&\n            k.negate === el.negate &&\n            k.value === el.value\n          ))\n        ) ||\n        ( el.type === NodeTypes.CharacterClassRange &&\n          keep.some(k => (\n            k.type === el.type &&\n            k.min.value === el.min.value &&\n            k.max.value === el.max.value\n          ))\n        )\n      ) {\n        continue;\n      }\n      // Keep non-duplicate nodes (first instance) and any `CharacterClass` nodes\n      keep.push(el);\n    }\n    node.elements = keep;\n  },\n};\n\nexport {\n  dedupeClasses,\n};\n"],
  "mappings": "aAAA,OAAQ,2BAAAA,EAAyB,aAAAC,MAAgB,wBAKjD,MAAMC,EAAgB,CACpB,eAAe,CAAC,KAAAC,CAAI,EAAG,CACrB,KAAM,CAAC,KAAAC,EAAM,SAAAC,CAAQ,EAAIF,EACzB,GAAIC,IAASJ,EAAwB,MACnC,OAEF,MAAMM,EAAO,CAAC,EACd,UAAWC,KAAMF,EAGXE,EAAG,OAASN,EAAU,WACtBK,EAAK,KAAKE,GACRA,EAAE,OAASD,EAAG,MACdC,EAAE,QAAUD,EAAG,KAChB,GAEDA,EAAG,OAASN,EAAU,cACtBK,EAAK,KAAKE,GACRA,EAAE,OAASD,EAAG,MACdC,EAAE,OAASD,EAAG,MACdC,EAAE,SAAWD,EAAG,QAChBC,EAAE,QAAUD,EAAG,KAChB,GAEDA,EAAG,OAASN,EAAU,qBACtBK,EAAK,KAAKE,GACRA,EAAE,OAASD,EAAG,MACdC,EAAE,IAAI,QAAUD,EAAG,IAAI,OACvBC,EAAE,IAAI,QAAUD,EAAG,IAAI,KACxB,GAMLD,EAAK,KAAKC,CAAE,EAEdJ,EAAK,SAAWG,CAClB,CACF,EAEA,OACEJ,KAAA",
  "names": ["NodeCharacterClassKinds", "NodeTypes", "dedupeClasses", "node", "kind", "elements", "keep", "el", "k"]
}
