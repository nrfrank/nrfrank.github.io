"use strict";var OnigurumaParser=(()=>{var re=Object.defineProperty;var Ve=Object.getOwnPropertyDescriptor;var Qe=Object.getOwnPropertyNames;var Je=Object.prototype.hasOwnProperty;var Xe=(e,n)=>{for(var t in n)re(e,t,{get:n[t],enumerable:!0})},Ze=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of Qe(n))!Je.call(e,a)&&a!==t&&re(e,a,{get:()=>n[a],enumerable:!(r=Ve(n,a))||r.enumerable});return e};var qe=e=>Ze(re({},"__esModule",{value:!0}),e);var jn={};Xe(jn,{generate:()=>X,getOptionalOptimizations:()=>le,optimize:()=>ze,parse:()=>z,toOnigurumaAst:()=>J,traverse:()=>Z});var ce=String.fromCodePoint,p=String.raw,$=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]);function pe(e,n,t){return e.has(n)||e.set(n,t),e.get(n)}function b(e,n){if(!e)throw new Error(n??"Value expected");return e}var c={Alternator:"Alternator",Assertion:"Assertion",Backreference:"Backreference",Character:"Character",CharacterClassClose:"CharacterClassClose",CharacterClassHyphen:"CharacterClassHyphen",CharacterClassIntersector:"CharacterClassIntersector",CharacterClassOpen:"CharacterClassOpen",CharacterSet:"CharacterSet",Directive:"Directive",GroupClose:"GroupClose",GroupOpen:"GroupOpen",Subroutine:"Subroutine",Quantifier:"Quantifier",EscapedNumber:"EscapedNumber"},y={any:"any",digit:"digit",dot:"dot",grapheme:"grapheme",hex:"hex",newline:"newline",posix:"posix",property:"property",space:"space",word:"word"},R={flags:"flags",keep:"keep"},k={absent_repeater:"absent_repeater",atomic:"atomic",capturing:"capturing",group:"group",lookahead:"lookahead",lookbehind:"lookbehind"},O={greedy:"greedy",lazy:"lazy",possessive:"possessive"},_e=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]),he=p`\[\^?`,fe=`c.? | C(?:-.?)?|${p`[pP]\{(?:\^?[-\x20_]*[A-Za-z][-\x20\w]*\})?`}|${p`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`}|${p`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`}|${p`o\{[^\}]*\}?`}|${p`\d{1,3}`}`,ge=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,W=new RegExp(p`
  \\ (?:
    ${fe}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?:
    \? (?:
      [:=!>({]
      | <[=!]
      | <[^>]*>
      | '[^']*'
      | ~\|?
      | #(?:[^)\\]|\\.?)*
      | [^:)]*[:)]
    )?
    | \*
  )?
  | ${ge.source}
  | ${he}
  | .
`.replace(/\s+/g,""),"gsu"),ae=new RegExp(p`
  \\ (?:
    ${fe}
    | .
  )
  | \[:(?:\^?\p{Alpha}+|\^):\]
  | ${he}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function me(e,n={}){let t={flags:"",...n,rules:{captureGroup:!1,singleline:!1,...n.rules}};if(typeof e!="string")throw new Error("String expected as pattern");let r=ln(t.flags),a=[r.extended],i={captureGroup:t.rules.captureGroup,getCurrentModX:()=>a.at(-1),numOpenGroups:0,popModX(){a.pop()},pushModX(g){a.push(g)},replaceCurrentModX(g){a[a.length-1]=g},singleline:t.rules.singleline},o=[],l;for(W.lastIndex=0;l=W.exec(e);){let g=Ye(i,e,l[0],W.lastIndex);g.tokens?o.push(...g.tokens):g.token&&o.push(g.token),g.lastIndex!==void 0&&(W.lastIndex=g.lastIndex)}let u=[],m=0;o.forEach(g=>{g.type===c.GroupOpen&&(g.kind===k.capturing?g.number=++m:g.raw==="("&&u.push(g))}),m||u.forEach((g,C)=>{g.kind=k.capturing,g.number=C+1});let I=m||u.length;return o=o.map(g=>g.type===c.EscapedNumber?cn(g,I):g).flat(),{tokens:o,flags:r}}function Ye(e,n,t,r){let[a,i]=t;if(a==="["){let o=en(n,t,r);return{tokens:o.tokens,lastIndex:o.lastIndex}}if(a==="\\"){if("AbBGyYzZ".includes(i))return{token:f(c.Assertion,t,{kind:t})};if(/^\\g[<']/.test(t)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(t))throw new Error(`Invalid group name "${t}"`);return{token:f(c.Subroutine,t)}}if(/^\\k[<']/.test(t)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(t))throw new Error(`Invalid group name "${t}"`);return{token:f(c.Backreference,t)}}if(i==="K")return{token:f(c.Directive,t,{kind:R.keep})};if(i==="N"||i==="R")return{token:f(c.CharacterSet,t,{kind:y.newline,negate:i==="N"})};if(i==="O")return{token:f(c.CharacterSet,t,{kind:y.any})};if(i==="X")return{token:f(c.CharacterSet,t,{kind:y.grapheme})};let o=Ce(t,{inCharClass:!1});return Array.isArray(o)?{tokens:o}:{token:o}}if(a==="("){if(t==="(*")throw new Error(`Unsupported named callout "${t}"`);if(t==="(?{")throw new Error(`Unsupported callout "${t}"`);if(t.startsWith("(?#")){if(n[r]!==")")throw new Error('Unclosed comment group "(?#"');return{lastIndex:r+1}}if(/^\(\?[-imx]+[:)]$/.test(t))return{token:rn(t,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,t==="("&&!e.captureGroup||t==="(?:")return{token:f(c.GroupOpen,t,{kind:k.group})};if(t==="(?>")return{token:f(c.GroupOpen,t,{kind:k.atomic})};if(t==="(?="||t==="(?!"||t==="(?<="||t==="(?<!")return{token:f(c.GroupOpen,t,{kind:t[2]==="<"?k.lookbehind:k.lookahead,negate:t.endsWith("!")})};if(t==="("&&e.captureGroup||t.startsWith("(?<")&&t.endsWith(">")||t.startsWith("(?'")&&t.endsWith("'")){let o=f(c.GroupOpen,t,{kind:k.capturing});return t!=="("&&(o.name=t.slice(3,-1)),{token:o}}if(t.startsWith("(?~")){if(t==="(?~|")throw new Error(`Unsupported absent function kind "${t}"`);return{token:f(c.GroupOpen,t,{kind:k.absent_repeater})}}throw t==="(?("?new Error(`Unsupported conditional "${t}"`):new Error(`Invalid or unsupported group option "${t}"`)}if(t===")"){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:f(c.GroupClose,t)}}if(t==="#"&&e.getCurrentModX()){let o=n.indexOf(`
`,r);return{lastIndex:o===-1?n.length:o}}if(/^\s$/.test(t)&&e.getCurrentModX()){let o=/\s+/y;return o.lastIndex=r,{lastIndex:o.exec(n)?o.lastIndex:r}}if(t===".")return{token:f(c.CharacterSet,t,{kind:y.dot})};if(t==="^"||t==="$"){let o=e.singleline?{"^":p`\A`,$:p`\Z`}[t]:t;return{token:f(c.Assertion,t,{kind:o})}}return t==="|"?{token:f(c.Alternator,t)}:ge.test(t)?{token:an(t)}:(Ie(t),{token:f(c.Character,t,{value:t.codePointAt(0)})})}function en(e,n,t){let r=[f(c.CharacterClassOpen,n,{negate:n[1]==="^"})],a=1,i;for(ae.lastIndex=t;i=ae.exec(e);){let o=i[0];if(o[0]==="["&&o[1]!==":")a++,r.push(f(c.CharacterClassOpen,o,{negate:o[1]==="^"}));else if(o==="]"){if(r.at(-1).type===c.CharacterClassOpen)r.push(f(c.Character,o,{value:93}));else if(a--,r.push(f(c.CharacterClassClose,o)),!a)break}else{let l=nn(o);Array.isArray(l)?r.push(...l):r.push(l)}}return{tokens:r,lastIndex:ae.lastIndex||e.length}}function nn(e){if(e[0]==="\\")return Ce(e,{inCharClass:!0});if(e[0]==="["){let n=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(e);if(!n||!$.has(n.groups.name))throw new Error(`Invalid POSIX class "${e}"`);return f(c.CharacterSet,e,{kind:y.posix,value:n.groups.name,negate:!!n.groups.negate})}return e==="-"?f(c.CharacterClassHyphen,e):e==="&&"?f(c.CharacterClassIntersector,e):(Ie(e),f(c.Character,e,{value:e.codePointAt(0)}))}function Ce(e,{inCharClass:n}){let t=e[1];if(t==="c"||t==="C")return tn(e);if("dDhHsSwW".includes(t))return on(e);if(e.startsWith(p`\o{`))throw new Error(`Incomplete, invalid, or unsupported octal code point "${e}"`);if(/^\\[pP]\{/.test(e)){if(e.length===3)throw new Error(`Incomplete or invalid Unicode property "${e}"`);return sn(e)}if(/^\\x[89A-Fa-f]\p{AHex}/u.test(e))try{let r=e.split(/\\x/).slice(1).map(l=>parseInt(l,16)),a=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(r)),i=new TextEncoder;return[...a].map(l=>{let u=[...i.encode(l)].map(m=>`\\x${m.toString(16)}`).join("");return f(c.Character,u,{value:l.codePointAt(0)})})}catch{throw new Error(`Multibyte code "${e}" incomplete or invalid in Oniguruma`)}if(t==="u"||t==="x")return f(c.Character,e,{value:un(e)});if(_e.has(t))return f(c.Character,e,{value:_e.get(t)});if(/\d/.test(t))return f(c.EscapedNumber,e,{inCharClass:n});if(e==="\\")throw new Error(p`Incomplete escape "\"`);if(t==="M")throw new Error(`Unsupported meta "${e}"`);if([...e].length===2)return f(c.Character,e,{value:e.codePointAt(1)});throw new Error(`Unexpected escape "${e}"`)}function f(e,n,t){return{type:e,raw:n,...t}}function tn(e){let n=e[1]==="c"?e[2]:e[3];if(!n||!/[A-Za-z]/.test(n))throw new Error(`Unsupported control character "${e}"`);return f(c.Character,e,{value:n.toUpperCase().codePointAt(0)-64})}function rn(e,n){let{on:t,off:r}=/^\(\?(?<on>[imx]*)(?:-(?<off>[-imx]*))?/.exec(e).groups;r??="";let a=(n.getCurrentModX()||t.includes("x"))&&!r.includes("x"),i=de(t),o=de(r),l={};if(i&&(l.enable=i),o&&(l.disable=o),e.endsWith(")"))return n.replaceCurrentModX(a),f(c.Directive,e,{kind:R.flags,flags:l});if(e.endsWith(":")){n.pushModX(a),n.numOpenGroups++;let u=f(c.GroupOpen,e,{kind:k.group});return(i||o)&&(u.flags=l),u}throw new Error(`Unexpected flag modifier "${e}"`)}function an(e){let n={};if(e[0]==="{"){let{min:t,max:r}=/^\{(?<min>\d*)(?:,(?<max>\d*))?/.exec(e).groups,a=1e5;if(+t>a||+r>a)throw new Error("Quantifier value unsupported in Oniguruma");n.min=+t,n.max=r===void 0?+t:r===""?1/0:+r,n.kind=e.endsWith("?")?O.lazy:O.greedy}else n.min=e[0]==="+"?1:0,n.max=e[0]==="?"?1:1/0,n.kind=e[1]==="+"?O.possessive:e[1]==="?"?O.lazy:O.greedy;return f(c.Quantifier,e,n)}function on(e){let n=e[1].toLowerCase();return f(c.CharacterSet,e,{kind:{d:y.digit,h:y.hex,s:y.space,w:y.word}[n],negate:e[1]!==n})}function sn(e){let{p:n,neg:t,value:r}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[^}]+)/.exec(e).groups,a=n==="P"&&!t||n==="p"&&!!t;return f(c.CharacterSet,e,{kind:y.property,value:r,negate:a})}function de(e){let n={};return e.includes("i")&&(n.ignoreCase=!0),e.includes("m")&&(n.dotAll=!0),e.includes("x")&&(n.extended=!0),Object.keys(n).length?n:null}function ln(e){if(!/^[imxDPSW]*$/.test(e))throw new Error(`Flags "${e}" includes unsupported value`);let n={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1};for(let t of e)n[{i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"}[t]]=!0;return n}function un(e){if(/^(?:\\u(?!\p{AHex}{4})|\\x(?!\p{AHex}{1,2}|\{\p{AHex}{1,8}\}))/u.test(e))throw new Error(`Incomplete or invalid escape "${e}"`);let n=e[2]==="{"?/^\\x\{\s*(?<hex>\p{AHex}+)/u.exec(e).groups.hex:e.slice(2);return parseInt(n,16)}function cn(e,n){let{raw:t,inCharClass:r}=e,a=t.slice(1);if(!r&&(a!=="0"&&a.length===1||a[0]!=="0"&&+a<=n))return[f(c.Backreference,t)];let i=[],o=a.match(/^[0-7]+|\d/g);for(let l=0;l<o.length;l++){let u=o[l],m;if(l===0&&u!=="8"&&u!=="9"){if(m=parseInt(u,8),m>127)throw new Error(p`Octal encoded byte above 177 unsupported "${t}"`)}else m=u.codePointAt(0);i.push(f(c.Character,(l===0?"\\":"")+u,{value:m}))}return i}function Ie(e){if([...e].length!==1)throw new Error(`Expected "${e}" to be a single code point`)}var s={AbsentFunction:"AbsentFunction",Alternative:"Alternative",Assertion:"Assertion",Backreference:"Backreference",CapturingGroup:"CapturingGroup",Character:"Character",CharacterClass:"CharacterClass",CharacterClassRange:"CharacterClassRange",CharacterSet:"CharacterSet",Directive:"Directive",Flags:"Flags",Group:"Group",LookaroundAssertion:"LookaroundAssertion",Pattern:"Pattern",Quantifier:"Quantifier",Regex:"Regex",Subroutine:"Subroutine",Recursion:"Recursion"},j={repeater:"repeater"},x={grapheme_boundary:"grapheme_boundary",line_end:"line_end",line_start:"line_start",search_start:"search_start",string_end:"string_end",string_end_newline:"string_end_newline",string_start:"string_start",word_boundary:"word_boundary"},S={union:"union",intersection:"intersection"},h=y,G=R,w=O,M={lookahead:"lookahead",lookbehind:"lookbehind"};function z(e,n={}){let t={flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...n,rules:{captureGroup:!1,singleline:!1,...n.rules}},r=me(e,{flags:t.flags,rules:{captureGroup:t.rules.captureGroup,singleline:t.rules.singleline}}),a={capturingGroups:[],current:0,hasNumberedRef:!1,namedGroupsByName:new Map,normalizeUnknownPropertyNames:t.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:t.skipBackrefValidation,skipLookbehindValidation:t.skipLookbehindValidation,skipPropertyNameValidation:t.skipPropertyNameValidation,subroutines:[],token:null,tokens:r.tokens,unicodePropertyMap:t.unicodePropertyMap,walk:i};function i(C,d){let _=r.tokens[a.current];switch(a.parent=C,a.token=_,a.current++,_.type){case c.Alternator:return A();case c.Assertion:return yn(_);case c.Backreference:return pn(a);case c.Character:return be(_.value,{useLastValid:!!d.isCheckingRangeEnd});case c.CharacterClassHyphen:return _n(a,d);case c.CharacterClassOpen:return dn(a,d);case c.CharacterSet:return hn(a);case c.Directive:return xn(b(G[_.kind],`Unexpected directive kind "${_.kind}"`),{flags:_.flags});case c.GroupOpen:return fn(a,d);case c.Quantifier:return gn(a);case c.Subroutine:return mn(a);default:throw new Error(`Unexpected token type "${_.type}"`)}}let o=Mn(vn(),An(r.flags)),l=o.pattern.alternatives[0];for(;a.current<r.tokens.length;){let C=i(l,{});C.type===s.Alternative?(o.pattern.alternatives.push(C),l=C):l.elements.push(C)}let{capturingGroups:u,hasNumberedRef:m,namedGroupsByName:I,subroutines:g}=a;if(m&&I.size&&!t.rules.captureGroup)throw new Error("Numbered backref/subroutine not allowed when using named capture");for(let{ref:C}of g)if(typeof C=="number"){if(C>u.length)throw new Error("Subroutine uses a group number that's not defined")}else if(I.has(C)){if(I.get(C).length>1)throw new Error(p`Subroutine uses a duplicate group name "\g<${C}>"`)}else throw new Error(p`Subroutine uses a group name that's not defined "\g<${C}>"`);return o}function pn(e){let{raw:n}=e.token,t=/^\\k[<']/.test(n),r=t?n.slice(3,-1):n.slice(1),a=(i,o=!1)=>{let l=e.capturingGroups.length,u=!1;if(i>l)if(e.skipBackrefValidation)u=!0;else throw new Error(`Not enough capturing groups defined to the left "${n}"`);return e.hasNumberedRef=!0,ye(o?l+1-i:i,{orphan:u})};if(t){let i=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(r);if(i)return a(+i.groups.num,!!i.groups.sign);if(/[-+]/.test(r))throw new Error(`Invalid backref name "${n}"`);if(!e.namedGroupsByName.has(r))throw new Error(`Group name not defined to the left "${n}"`);return ye(r)}return a(+r)}function _n(e,n){let{parent:t,tokens:r,walk:a}=e,i=t.elements.at(-1),o=r[e.current];if(!n.isCheckingRangeEnd&&i&&i.type!==s.CharacterClass&&i.type!==s.CharacterClassRange&&o&&o.type!==c.CharacterClassOpen&&o.type!==c.CharacterClassClose&&o.type!==c.CharacterClassIntersector){let l=a(t,{...n,isCheckingRangeEnd:!0});if(i.type===s.Character&&l.type===s.Character)return t.elements.pop(),bn(i,l);throw new Error("Invalid character class range")}return be(45)}function dn(e,n){let{token:t,tokens:r,walk:a}=e,i=r[e.current],o=[U()],l=Se(i);for(;l.type!==c.CharacterClassClose;){if(l.type===c.CharacterClassIntersector)o.push(U()),e.current++;else{let m=o.at(-1);m.elements.push(a(m,n))}l=Se(r[e.current],i)}let u=U({negate:t.negate});return o.length===1?u.elements=o[0].elements:(u.kind=S.intersection,u.elements=o.map(m=>m.elements.length===1?m.elements[0]:m)),e.current++,u}function hn({token:e,normalizeUnknownPropertyNames:n,skipPropertyNameValidation:t,unicodePropertyMap:r}){let{kind:a,negate:i,value:o}=e;if(a===y.property){let l=Q(o);if($.has(l)&&!r?.has(l))a=y.posix,o=l;else return V(o,{negate:i,normalizeUnknownPropertyNames:n,skipPropertyNameValidation:t,unicodePropertyMap:r})}return a===y.posix?wn(o,{negate:i}):P(a,{negate:i})}function fn(e,n){let{token:t,tokens:r,capturingGroups:a,namedGroupsByName:i,skipLookbehindValidation:o,walk:l}=e,u=Sn(t),m=u.type===s.AbsentFunction,I=u.kind===M.lookbehind,g=I&&u.negate;if(u.type===s.CapturingGroup&&(a.push(u),u.name&&pe(i,u.name,[]).push(u)),m&&n.isInAbsentFunction)throw new Error("Nested absent function not supported by Oniguruma");let C=ke(r[e.current]);for(;C.type!==c.GroupClose;){if(C.type===c.Alternator)u.alternatives.push(A()),e.current++;else{let d=u.alternatives.at(-1),_=l(d,{...n,isInAbsentFunction:n.isInAbsentFunction||m,isInLookbehind:n.isInLookbehind||I,isInNegLookbehind:n.isInNegLookbehind||g});if(d.elements.push(_),(I||n.isInLookbehind)&&!o){let v="Lookbehind includes a pattern not allowed by Oniguruma";if(g||n.isInNegLookbehind){if(_.kind===M.lookahead||_.type===s.CapturingGroup)throw new Error(v)}else if(_.kind===M.lookahead||_.kind===M.lookbehind&&_.negate)throw new Error(v)}}C=ke(r[e.current])}return e.current++,u}function gn({token:e,parent:n}){let{min:t,max:r,kind:a}=e,i=n.elements.at(-1);if(!i||i.type===s.Assertion||i.type===s.Directive||i.type===s.LookaroundAssertion)throw new Error("Quantifier requires a repeatable token");let o=Pn(i,t,r,b(w[a],`Unexpected quantifier kind "${a}"`));return n.elements.pop(),o}function mn(e){let{token:n,capturingGroups:t,subroutines:r}=e,a=n.raw.slice(3,-1),i=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(a);if(i){let l=+i.groups.num,u=t.length;if(e.hasNumberedRef=!0,a={"":l,"+":u+l,"-":u+1-l}[i.groups.sign],a<1)throw new Error("Invalid subroutine number")}else a==="0"&&(a=0);let o=Nn(a);return r.push(o),o}function Cn(e){if(e!==j.repeater)throw new Error(`Unexpected absent function kind "${e}"`);return{type:s.AbsentFunction,kind:e,alternatives:[A()]}}function A(){return{type:s.Alternative,elements:[]}}function In(e,n){let t={type:s.Assertion,kind:e};return(e===x.word_boundary||e===x.grapheme_boundary)&&(t.negate=!!n?.negate),t}function yn({kind:e}){return In(b({"^":x.line_start,$:x.line_end,"\\A":x.string_start,"\\b":x.word_boundary,"\\B":x.word_boundary,"\\G":x.search_start,"\\y":x.grapheme_boundary,"\\Y":x.grapheme_boundary,"\\z":x.string_end,"\\Z":x.string_end_newline}[e],`Unexpected assertion kind "${e}"`),{negate:e===p`\B`||e===p`\Y`})}function ye(e,n){let t=!!n?.orphan;return{type:s.Backreference,ref:e,...t&&{orphan:t}}}function Sn({flags:e,kind:n,name:t,negate:r,number:a}){switch(n){case k.absent_repeater:return Cn(j.repeater);case k.atomic:return T({atomic:!0});case k.capturing:return kn(a,t);case k.group:return T({flags:e});case k.lookahead:case k.lookbehind:return En({behind:n===k.lookbehind,negate:r});default:throw new Error(`Unexpected group kind "${n}"`)}}function kn(e,n){let t=n!==void 0;if(t&&!On(n))throw new Error(`Group name "${n}" invalid in Oniguruma`);return{type:s.CapturingGroup,number:e,...t&&{name:n},alternatives:[A()]}}function be(e,n){let t={useLastValid:!1,...n};if(e>1114111){let r=e.toString(16);if(t.useLastValid)e=1114111;else throw e>1310719?new Error(`Invalid code point out of range "\\x{${r}}"`):new Error(`Invalid code point out of range in JS "\\x{${r}}"`)}return{type:s.Character,value:e}}function U(e){let n={kind:S.union,negate:!1,...e};return{type:s.CharacterClass,kind:n.kind,negate:n.negate,elements:[]}}function bn(e,n){if(n.value<e.value)throw new Error("Character class range out of order");return{type:s.CharacterClassRange,min:e,max:n}}function P(e,n){let t=!!n?.negate,r={type:s.CharacterSet,kind:b(h[e],`Unexpected character set kind "${e}"`)};return(e===y.digit||e===y.hex||e===y.newline||e===y.space||e===y.word)&&(r.negate=t),(e===y.grapheme||e===y.newline&&!t)&&(r.variableLength=!0),r}function xn(e,n){let t={type:s.Directive,kind:e};return e===G.flags&&(t.flags=n.flags),t}function An(e){return{type:s.Flags,...e}}function T(e){let n=e?.atomic,t=e?.flags;return{type:s.Group,...n&&{atomic:n},...t&&{flags:t},alternatives:[A()]}}function En(e){let n={behind:!1,negate:!1,...e};return{type:s.LookaroundAssertion,kind:n.behind?M.lookbehind:M.lookahead,negate:n.negate,alternatives:[A()]}}function vn(){return{type:s.Pattern,alternatives:[A()]}}function wn(e,n){let t=!!n?.negate;if(!$.has(e))throw new Error(`Invalid POSIX class "${e}"`);return{type:s.CharacterSet,kind:h.posix,value:e,negate:t}}function Pn(e,n,t,r=w.greedy){let a={type:s.Quantifier,min:n,max:t,kind:r,element:e};return t<n?{...a,min:t,max:n,kind:w.possessive}:a}function Mn(e,n){return{type:s.Regex,pattern:e,flags:n}}function Nn(e){return{type:s.Subroutine,ref:e}}function V(e,n){let t={negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...n},r=t.unicodePropertyMap?.get(Q(e));if(!r){if(t.normalizeUnknownPropertyNames)r=Tn(e);else if(t.unicodePropertyMap&&!t.skipPropertyNameValidation)throw new Error(p`Invalid Unicode property "\p{${e}}"`)}return{type:s.CharacterSet,kind:h.property,value:r??e,negate:t.negate}}function On(e){return/^[\p{Alpha}\p{Pc}][^)]*$/u.test(e)}function Tn(e){return e.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,n=>n[0].toUpperCase()+n.slice(1).toLowerCase())}function Q(e){return e.replace(/[- _]+/g,"").toLowerCase()}function Se(e,n){return b(e,`${n?.value===93?"Empty":"Unclosed"} character class`)}function ke(e){return b(e,"Unclosed group")}var xe=new Map(`ASCII_Hex_Digit
Adlam
Ahom
Alphabetic
Anatolian_Hieroglyphs
Any
Arabic
Armenian
Assigned
Avestan
Balinese
Bamum
Bassa_Vah
Batak
Bengali
Bhaiksuki
Bidi_Control
Bopomofo
Brahmi
Braille
Buginese
Buhid
C
Canadian_Aboriginal
Carian
Case_Ignorable
Cased
Caucasian_Albanian
Cc
Cf
Chakma
Cham
Changes_When_Casefolded
Changes_When_Casemapped
Changes_When_Lowercased
Changes_When_Titlecased
Changes_When_Uppercased
Cherokee
Chorasmian
Cn
Co
Common
Coptic
Cs
Cuneiform
Cypriot
Cypro_Minoan
Cyrillic
Dash
Default_Ignorable_Code_Point
Deprecated
Deseret
Devanagari
Diacritic
Dives_Akuru
Dogra
Duployan
Egyptian_Hieroglyphs
Elbasan
Elymaic
Emoji
Emoji_Component
Emoji_Modifier
Emoji_Modifier_Base
Emoji_Presentation
Ethiopic
Extended_Pictographic
Extender
Garay
Georgian
Glagolitic
Gothic
Grantha
Grapheme_Base
Grapheme_Extend
Grapheme_Link
Greek
Gujarati
Gunjala_Gondi
Gurmukhi
Gurung_Khema
Han
Hangul
Hanifi_Rohingya
Hanunoo
Hatran
Hebrew
Hex_Digit
Hiragana
Hyphen
IDS_Binary_Operator
IDS_Trinary_Operator
IDS_Unary_Operator
ID_Compat_Math_Continue
ID_Compat_Math_Start
ID_Continue
ID_Start
Ideographic
Imperial_Aramaic
InCB
Inherited
Inscriptional_Pahlavi
Inscriptional_Parthian
Javanese
Join_Control
Kaithi
Kannada
Katakana
Kawi
Kayah_Li
Kharoshthi
Khitan_Small_Script
Khmer
Khojki
Khudawadi
Kirat_Rai
L
LC
Lao
Latin
Lepcha
Limbu
Linear_A
Linear_B
Lisu
Ll
Lm
Lo
Logical_Order_Exception
Lowercase
Lt
Lu
Lycian
Lydian
M
Mahajani
Makasar
Malayalam
Mandaic
Manichaean
Marchen
Masaram_Gondi
Math
Mc
Me
Medefaidrin
Meetei_Mayek
Mende_Kikakui
Meroitic_Cursive
Meroitic_Hieroglyphs
Miao
Mn
Modi
Modifier_Combining_Mark
Mongolian
Mro
Multani
Myanmar
N
Nabataean
Nag_Mundari
Nandinagari
Nd
New_Tai_Lue
Newa
Nko
Nl
No
Noncharacter_Code_Point
Nushu
Nyiakeng_Puachue_Hmong
Ogham
Ol_Chiki
Ol_Onal
Old_Hungarian
Old_Italic
Old_North_Arabian
Old_Permic
Old_Persian
Old_Sogdian
Old_South_Arabian
Old_Turkic
Old_Uyghur
Oriya
Osage
Osmanya
Other_Alphabetic
Other_Default_Ignorable_Code_Point
Other_Grapheme_Extend
Other_ID_Continue
Other_ID_Start
Other_Lowercase
Other_Math
Other_Uppercase
P
Pahawh_Hmong
Palmyrene
Pattern_Syntax
Pattern_White_Space
Pau_Cin_Hau
Pc
Pd
Pe
Pf
Phags_Pa
Phoenician
Pi
Po
Prepended_Concatenation_Mark
Ps
Psalter_Pahlavi
Quotation_Mark
Radical
Regional_Indicator
Rejang
Runic
S
Samaritan
Saurashtra
Sc
Sentence_Terminal
Sharada
Shavian
Siddham
SignWriting
Sinhala
Sk
Sm
So
Soft_Dotted
Sogdian
Sora_Sompeng
Soyombo
Sundanese
Sunuwar
Syloti_Nagri
Syriac
Tagalog
Tagbanwa
Tai_Le
Tai_Tham
Tai_Viet
Takri
Tamil
Tangsa
Tangut
Telugu
Terminal_Punctuation
Thaana
Thai
Tibetan
Tifinagh
Tirhuta
Todhri
Toto
Tulu_Tigalari
Ugaritic
Unified_Ideograph
Unknown
Uppercase
Vai
Variation_Selector
Vithkuqi
Wancho
Warang_Citi
White_Space
XID_Continue
XID_Start
Yezidi
Yi
Z
Zanabazar_Square
Zl
Zp
Zs
Adlm
Aghb
AHex
Arab
Armi
Armn
Avst
Bali
Bamu
Bass
Batk
Beng
Bhks
Bidi_C
Bopo
Brah
Brai
Bugi
Buhd
Cakm
Cans
Cari
Cased_Letter
Cher
Chrs
CI
Close_Punctuation
Combining_Mark
Connector_Punctuation
Control
Copt
Cpmn
Cprt
Currency_Symbol
CWCF
CWCM
CWL
CWT
CWU
Cyrl
Dash_Punctuation
Decimal_Number
Dep
Deva
DI
Dia
Diak
Dogr
Dsrt
Dupl
EBase
EComp
Egyp
Elba
Elym
EMod
Enclosing_Mark
EPres
Ethi
Ext
ExtPict
Final_Punctuation
Format
Gara
Geor
Glag
Gong
Gonm
Goth
Gran
Gr_Base
Grek
Gr_Ext
Gr_Link
Gujr
Gukh
Guru
Hang
Hani
Hano
Hatr
Hebr
Hex
Hira
Hluw
Hmng
Hmnp
Hung
IDC
Ideo
IDS
IDSB
IDST
IDSU
Initial_Punctuation
Ital
Java
Join_C
Kali
Kana
Khar
Khmr
Khoj
Kits
Knda
Krai
Kthi
Lana
Laoo
Latn
Lepc
Letter
Letter_Number
Limb
Lina
Linb
Line_Separator
LOE
Lowercase_Letter
Lyci
Lydi
Mahj
Maka
Mand
Mani
Marc
Mark
Math_Symbol
MCM
Medf
Mend
Merc
Mero
Mlym
Modifier_Letter
Modifier_Symbol
Mong
Mroo
Mtei
Mult
Mymr
Nagm
Nand
Narb
Nbat
NChar
Nkoo
Nonspacing_Mark
Nshu
Number
OAlpha
ODI
Ogam
OGr_Ext
OIDC
OIDS
Olck
OLower
OMath
Onao
Open_Punctuation
Orkh
Orya
Osge
Osma
Other
Other_Letter
Other_Number
Other_Punctuation
Other_Symbol
Ougr
OUpper
Palm
Paragraph_Separator
Pat_Syn
Pat_WS
Pauc
PCM
Perm
Phag
Phli
Phlp
Phnx
Plrd
Private_Use
Prti
punct
Punctuation
Qaac
Qaai
QMark
RI
Rjng
Rohg
Runr
Samr
Sarb
Saur
SD
Separator
Sgnw
Shaw
Shrd
Sidd
Sind
Sinh
Sogd
Sogo
Sora
Soyo
Space_Separator
Spacing_Mark
STerm
Sund
Sunu
Surrogate
Sylo
Symbol
Syrc
Tagb
Takr
Tale
Talu
Taml
Tang
Tavt
Telu
Term
Tfng
Tglg
Thaa
Tibt
Tirh
Titlecase_Letter
Tnsa
Todr
Tutg
Ugar
UIdeo
Unassigned
Uppercase_Letter
Vaii
Vith
VS
Wara
Wcho
WSpace
XIDC
XIDS
Xpeo
Xsux
Yezi
Yiii
Zanb
Zinh
Zyyy
Zzzz
In_Basic_Latin
In_Latin_1_Supplement
In_Latin_Extended_A
In_Latin_Extended_B
In_IPA_Extensions
In_Spacing_Modifier_Letters
In_Combining_Diacritical_Marks
In_Greek_and_Coptic
In_Cyrillic
In_Cyrillic_Supplement
In_Armenian
In_Hebrew
In_Arabic
In_Syriac
In_Arabic_Supplement
In_Thaana
In_NKo
In_Samaritan
In_Mandaic
In_Syriac_Supplement
In_Arabic_Extended_B
In_Arabic_Extended_A
In_Devanagari
In_Bengali
In_Gurmukhi
In_Gujarati
In_Oriya
In_Tamil
In_Telugu
In_Kannada
In_Malayalam
In_Sinhala
In_Thai
In_Lao
In_Tibetan
In_Myanmar
In_Georgian
In_Hangul_Jamo
In_Ethiopic
In_Ethiopic_Supplement
In_Cherokee
In_Unified_Canadian_Aboriginal_Syllabics
In_Ogham
In_Runic
In_Tagalog
In_Hanunoo
In_Buhid
In_Tagbanwa
In_Khmer
In_Mongolian
In_Unified_Canadian_Aboriginal_Syllabics_Extended
In_Limbu
In_Tai_Le
In_New_Tai_Lue
In_Khmer_Symbols
In_Buginese
In_Tai_Tham
In_Combining_Diacritical_Marks_Extended
In_Balinese
In_Sundanese
In_Batak
In_Lepcha
In_Ol_Chiki
In_Cyrillic_Extended_C
In_Georgian_Extended
In_Sundanese_Supplement
In_Vedic_Extensions
In_Phonetic_Extensions
In_Phonetic_Extensions_Supplement
In_Combining_Diacritical_Marks_Supplement
In_Latin_Extended_Additional
In_Greek_Extended
In_General_Punctuation
In_Superscripts_and_Subscripts
In_Currency_Symbols
In_Combining_Diacritical_Marks_for_Symbols
In_Letterlike_Symbols
In_Number_Forms
In_Arrows
In_Mathematical_Operators
In_Miscellaneous_Technical
In_Control_Pictures
In_Optical_Character_Recognition
In_Enclosed_Alphanumerics
In_Box_Drawing
In_Block_Elements
In_Geometric_Shapes
In_Miscellaneous_Symbols
In_Dingbats
In_Miscellaneous_Mathematical_Symbols_A
In_Supplemental_Arrows_A
In_Braille_Patterns
In_Supplemental_Arrows_B
In_Miscellaneous_Mathematical_Symbols_B
In_Supplemental_Mathematical_Operators
In_Miscellaneous_Symbols_and_Arrows
In_Glagolitic
In_Latin_Extended_C
In_Coptic
In_Georgian_Supplement
In_Tifinagh
In_Ethiopic_Extended
In_Cyrillic_Extended_A
In_Supplemental_Punctuation
In_CJK_Radicals_Supplement
In_Kangxi_Radicals
In_Ideographic_Description_Characters
In_CJK_Symbols_and_Punctuation
In_Hiragana
In_Katakana
In_Bopomofo
In_Hangul_Compatibility_Jamo
In_Kanbun
In_Bopomofo_Extended
In_CJK_Strokes
In_Katakana_Phonetic_Extensions
In_Enclosed_CJK_Letters_and_Months
In_CJK_Compatibility
In_CJK_Unified_Ideographs_Extension_A
In_Yijing_Hexagram_Symbols
In_CJK_Unified_Ideographs
In_Yi_Syllables
In_Yi_Radicals
In_Lisu
In_Vai
In_Cyrillic_Extended_B
In_Bamum
In_Modifier_Tone_Letters
In_Latin_Extended_D
In_Syloti_Nagri
In_Common_Indic_Number_Forms
In_Phags_pa
In_Saurashtra
In_Devanagari_Extended
In_Kayah_Li
In_Rejang
In_Hangul_Jamo_Extended_A
In_Javanese
In_Myanmar_Extended_B
In_Cham
In_Myanmar_Extended_A
In_Tai_Viet
In_Meetei_Mayek_Extensions
In_Ethiopic_Extended_A
In_Latin_Extended_E
In_Cherokee_Supplement
In_Meetei_Mayek
In_Hangul_Syllables
In_Hangul_Jamo_Extended_B
In_High_Surrogates
In_High_Private_Use_Surrogates
In_Low_Surrogates
In_Private_Use_Area
In_CJK_Compatibility_Ideographs
In_Alphabetic_Presentation_Forms
In_Arabic_Presentation_Forms_A
In_Variation_Selectors
In_Vertical_Forms
In_Combining_Half_Marks
In_CJK_Compatibility_Forms
In_Small_Form_Variants
In_Arabic_Presentation_Forms_B
In_Halfwidth_and_Fullwidth_Forms
In_Specials
In_Linear_B_Syllabary
In_Linear_B_Ideograms
In_Aegean_Numbers
In_Ancient_Greek_Numbers
In_Ancient_Symbols
In_Phaistos_Disc
In_Lycian
In_Carian
In_Coptic_Epact_Numbers
In_Old_Italic
In_Gothic
In_Old_Permic
In_Ugaritic
In_Old_Persian
In_Deseret
In_Shavian
In_Osmanya
In_Osage
In_Elbasan
In_Caucasian_Albanian
In_Vithkuqi
In_Todhri
In_Linear_A
In_Latin_Extended_F
In_Cypriot_Syllabary
In_Imperial_Aramaic
In_Palmyrene
In_Nabataean
In_Hatran
In_Phoenician
In_Lydian
In_Meroitic_Hieroglyphs
In_Meroitic_Cursive
In_Kharoshthi
In_Old_South_Arabian
In_Old_North_Arabian
In_Manichaean
In_Avestan
In_Inscriptional_Parthian
In_Inscriptional_Pahlavi
In_Psalter_Pahlavi
In_Old_Turkic
In_Old_Hungarian
In_Hanifi_Rohingya
In_Garay
In_Rumi_Numeral_Symbols
In_Yezidi
In_Arabic_Extended_C
In_Old_Sogdian
In_Sogdian
In_Old_Uyghur
In_Chorasmian
In_Elymaic
In_Brahmi
In_Kaithi
In_Sora_Sompeng
In_Chakma
In_Mahajani
In_Sharada
In_Sinhala_Archaic_Numbers
In_Khojki
In_Multani
In_Khudawadi
In_Grantha
In_Tulu_Tigalari
In_Newa
In_Tirhuta
In_Siddham
In_Modi
In_Mongolian_Supplement
In_Takri
In_Myanmar_Extended_C
In_Ahom
In_Dogra
In_Warang_Citi
In_Dives_Akuru
In_Nandinagari
In_Zanabazar_Square
In_Soyombo
In_Unified_Canadian_Aboriginal_Syllabics_Extended_A
In_Pau_Cin_Hau
In_Devanagari_Extended_A
In_Sunuwar
In_Bhaiksuki
In_Marchen
In_Masaram_Gondi
In_Gunjala_Gondi
In_Makasar
In_Kawi
In_Lisu_Supplement
In_Tamil_Supplement
In_Cuneiform
In_Cuneiform_Numbers_and_Punctuation
In_Early_Dynastic_Cuneiform
In_Cypro_Minoan
In_Egyptian_Hieroglyphs
In_Egyptian_Hieroglyph_Format_Controls
In_Egyptian_Hieroglyphs_Extended_A
In_Anatolian_Hieroglyphs
In_Gurung_Khema
In_Bamum_Supplement
In_Mro
In_Tangsa
In_Bassa_Vah
In_Pahawh_Hmong
In_Kirat_Rai
In_Medefaidrin
In_Miao
In_Ideographic_Symbols_and_Punctuation
In_Tangut
In_Tangut_Components
In_Khitan_Small_Script
In_Tangut_Supplement
In_Kana_Extended_B
In_Kana_Supplement
In_Kana_Extended_A
In_Small_Kana_Extension
In_Nushu
In_Duployan
In_Shorthand_Format_Controls
In_Symbols_for_Legacy_Computing_Supplement
In_Znamenny_Musical_Notation
In_Byzantine_Musical_Symbols
In_Musical_Symbols
In_Ancient_Greek_Musical_Notation
In_Kaktovik_Numerals
In_Mayan_Numerals
In_Tai_Xuan_Jing_Symbols
In_Counting_Rod_Numerals
In_Mathematical_Alphanumeric_Symbols
In_Sutton_SignWriting
In_Latin_Extended_G
In_Glagolitic_Supplement
In_Cyrillic_Extended_D
In_Nyiakeng_Puachue_Hmong
In_Toto
In_Wancho
In_Nag_Mundari
In_Ol_Onal
In_Ethiopic_Extended_B
In_Mende_Kikakui
In_Adlam
In_Indic_Siyaq_Numbers
In_Ottoman_Siyaq_Numbers
In_Arabic_Mathematical_Alphabetic_Symbols
In_Mahjong_Tiles
In_Domino_Tiles
In_Playing_Cards
In_Enclosed_Alphanumeric_Supplement
In_Enclosed_Ideographic_Supplement
In_Miscellaneous_Symbols_and_Pictographs
In_Emoticons
In_Ornamental_Dingbats
In_Transport_and_Map_Symbols
In_Alchemical_Symbols
In_Geometric_Shapes_Extended
In_Supplemental_Arrows_C
In_Supplemental_Symbols_and_Pictographs
In_Chess_Symbols
In_Symbols_and_Pictographs_Extended_A
In_Symbols_for_Legacy_Computing
In_CJK_Unified_Ideographs_Extension_B
In_CJK_Unified_Ideographs_Extension_C
In_CJK_Unified_Ideographs_Extension_D
In_CJK_Unified_Ideographs_Extension_E
In_CJK_Unified_Ideographs_Extension_F
In_CJK_Unified_Ideographs_Extension_I
In_CJK_Compatibility_Ideographs_Supplement
In_CJK_Unified_Ideographs_Extension_G
In_CJK_Unified_Ideographs_Extension_H
In_Tags
In_Variation_Selectors_Supplement
In_Supplementary_Private_Use_Area_A
In_Supplementary_Private_Use_Area_B
In_No_Block`.split(/\s/).map(e=>[Q(e),e]));function J(e,n={}){if({}.toString.call(n)!=="[object Object]")throw new Error("Unexpected options");return z(e,{flags:n.flags??"",rules:{captureGroup:n.rules?.captureGroup??!1,singleline:n.rules?.singleline??!1},unicodePropertyMap:xe})}function X(e){let n=null,r={inCharClass:!1,lastNode:n,parent:null};function a(i){r.lastNode=n,n=i,r.lastNode&&Un(r.lastNode)===i&&(r.parent=r.lastNode);let o=Gn[i.type];if(!o)throw new Error(`Unexpected node type "${i.type}"`);return o(i,r,a)}return a(e)}var Gn={Regex({pattern:e,flags:n},t,r){return{pattern:r(e),flags:r(n)}},AbsentFunction({kind:e,alternatives:n},t,r){if(e!==j.repeater)throw new Error(`Unexpected absent function kind "${e}"`);return`(?~${n.map(r).join("|")})`},Alternative({elements:e},n,t){return e.map(t).join("")},Assertion({kind:e,negate:n}){return e===x.grapheme_boundary?n?p`\Y`:p`\y`:e===x.word_boundary?n?p`\B`:p`\b`:b({line_end:"$",line_start:"^",search_start:p`\G`,string_end:p`\z`,string_end_newline:p`\Z`,string_start:p`\A`}[e],`Unexpected assertion kind "${e}"`)},Backreference({ref:e}){return typeof e=="number"?"\\"+e:`\\k<${e}>`},CapturingGroup(e,n,t){let{name:r,alternatives:a}=e;return`(${r?`?${r.includes(">")?`'${r}'`:`<${r}>`}`:""}${a.map(t).join("|")})`},Character({value:e},n){return $n(e,{escDigit:n.lastNode.type===s.Backreference,inCharClass:n.inCharClass})},CharacterClass({kind:e,negate:n,elements:t},r,a){function i(){return r.parent.type===s.CharacterClass&&r.parent.kind===S.intersection&&e===S.union&&!t.length?"":`[${n?"^":""}${t.map(a).join(e===S.intersection?"&&":"")}]`}if(!r.inCharClass){r.inCharClass=!0;let o=i();return r.inCharClass=!1,o}return i()},CharacterClassRange({min:e,max:n},t,r){return`${r(e)}-${r(n)}`},CharacterSet({kind:e,negate:n,value:t},r){return e===h.digit?n?p`\D`:p`\d`:e===h.hex?n?p`\H`:p`\h`:e===h.newline?n?p`\N`:p`\R`:e===h.posix?r.inCharClass?`[:${n?"^":""}${t}:]`:`${n?p`\P`:p`\p`}{${t}}`:e===h.property?`${n?p`\P`:p`\p`}{${t}}`:e===h.space?n?p`\S`:p`\s`:e===h.word?n?p`\W`:p`\w`:b({any:p`\O`,dot:".",grapheme:p`\X`}[e],`Unexpected character set kind "${e}"`)},Directive({kind:e,flags:n}){if(e===G.flags){let{enable:t={},disable:r={}}=n,a=B(t),i=B(r);return a||i?`(?${a}${i?`-${i}`:""})`:""}if(e===G.keep)return p`\K`;throw new Error(`Unexpected directive kind "${e}"`)},Flags(e){return B(e)},Group({atomic:e,flags:n,alternatives:t},r,a){let i=t.map(a).join("|");return`(?${Bn(e,n)}${i})`},LookaroundAssertion({kind:e,negate:n,alternatives:t},r,a){return`(?${`${e===M.lookahead?"":"<"}${n?"!":"="}`}${t.map(a).join("|")})`},Pattern({alternatives:e},n,t){return e.map(t).join("|")},Quantifier({min:e,max:n,kind:t,element:r},a,i){if(e>n)throw new Error(`Invalid quantifier: min "${e}" > max "${n}"`);if(e>1&&n===1/0&&t===w.possessive)throw new Error(`Invalid possessive quantifier: min "${e}" with no max"`);if(e===n&&t===w.possessive)throw new Error(`Invalid possessive quantifier: min and max are equal "${e}"`);let o=r.type===s.Quantifier&&r.kind===w.greedy,l,u=!1;!e&&n===1&&!o?l="?":!e&&n===1/0?l="*":e===1&&n===1/0&&!o?l="+":e===n?(l=`{${e}}`,u=!0):(l=t===w.possessive?`{${n},${e}}`:`{${e},${n===1/0?"":n}}`,u=!0);let m={greedy:"",lazy:"?",possessive:u?"":"+"}[t];return`${i(r)}${l}${m}`},Subroutine({ref:e}){return typeof e=="string"&&e.includes(">")?p`\g'${e}'`:p`\g<${e}>`}},Ln=new Set(["$","(",")","*","+",".","?","[","\\","^","{","|"]),Dn=new Set(["&","-","[","\\","]","^"]),Ae=new Map([[7,p`\a`],[9,p`\t`],[10,p`\n`],[11,p`\v`],[12,p`\f`],[13,p`\r`],[27,p`\e`],[8232,p`\u2028`],[8233,p`\u2029`],[65279,p`\uFEFF`]]);function $n(e,{escDigit:n,inCharClass:t}){if(Ae.has(e))return Ae.get(e);if(e<32||e>126&&e<160||e>262143||n&&Kn(e))return e>127?`\\x{${e.toString(16).toUpperCase()}}`:`\\x${e.toString(16).toUpperCase().padStart(2,"0")}`;let r=t?Dn:Ln,a=ce(e);return(r.has(a)?"\\":"")+a}function Un(e){return e.alternatives?e.alternatives[0]:e.elements?e.elements[0]??null:e.element?e.element:e.min&&e.min.type?e.min:e.pattern?e.pattern:null}function B({ignoreCase:e,dotAll:n,extended:t,digitIsAscii:r,posixIsAscii:a,spaceIsAscii:i,wordIsAscii:o}){return`${e?"i":""}${n?"m":""}${t?"x":""}${r?"D":""}${a?"P":""}${i?"S":""}${o?"W":""}`}function Bn(e,n){if(e)return">";let t="";if(n){let{enable:r={},disable:a={}}=n,i=B(r),o=B(a);t=`${i}${o?`-${o}`:""}`}return`${t}:`}function Kn(e){return e>47&&e<58}function Z(e,n,t=null){function r(i,o){for(let l=0;l<i.length;l++){let u=a(i[l],o,l,i);l=Math.max(-1,l+u)}}function a(i,o=null,l=null,u=null){let m="Container expected",I=0,g=!1,C={node:i,parent:o,key:l,container:u,root:e,remove(){b(u,m).splice(Math.max(0,l+I),1),I--,g=!0},removeAllNextSiblings(){return b(u,m).splice(l+1)},removeAllPrevSiblings(){let E=l+I;return I-=E,b(u,m).splice(0,Math.max(0,E))},replaceWith(E,D={}){let te=!!D.traverse;u?u[Math.max(0,l+I)]=E:o[l]=E,te&&a(E,o,l,u),g=!0},replaceWithMultiple(E,D={}){let te=!!D.traverse;if(b(u,m).splice(Math.max(0,l+I),1,...E),I+=E.length-1,te){let ue=0;for(let H=0;H<E.length;H++)ue+=a(E[H],o,l+H+ue,u)}g=!0},skip(){g=!0}},d=n["*"],_=n[i.type],v=typeof d=="function"?d:d?.enter,F=typeof _=="function"?_:_?.enter;if(v?.(C,t),F?.(C,t),!g)switch(i.type){case s.Regex:a(i.pattern,i,"pattern"),a(i.flags,i,"flags");break;case s.Alternative:case s.CharacterClass:r(i.elements,i);break;case s.Assertion:case s.Backreference:case s.Character:case s.CharacterSet:case s.Directive:case s.Flags:case s.Recursion:case s.Subroutine:break;case s.AbsentFunction:case s.CapturingGroup:case s.Group:case s.Pattern:r(i.alternatives,i);break;case s.CharacterClassRange:a(i.min,i,"min"),a(i.max,i,"max");break;case s.LookaroundAssertion:r(i.alternatives,i);break;case s.Quantifier:a(i.element,i,"element");break;default:throw new Error(`Unexpected node type "${i.type}"`)}return d?.exit?.(C,t),_?.exit?.(C,t),I}a(e)}var L=new Set([s.AbsentFunction,s.CapturingGroup,s.Group,s.LookaroundAssertion,s.Pattern]),ie=new Set([s.Assertion,s.Backreference,s.Character,s.CharacterClass,s.CharacterSet,s.Directive]),Ee=new Set([s.AbsentFunction,s.Backreference,s.CapturingGroup,s.Character,s.CharacterClass,s.CharacterSet,s.Group,s.Quantifier,s.Subroutine]),ve=new Set([h.digit,h.hex,h.posix,h.property,h.space,h.word]);function oe(e,n){if(!e.elements)throw new Error("Expected node with elements");if(e.elements.length!==1)return!1;let t=e.elements[0];return!n||Object.keys(n).every(r=>n[r]===t[r])}var Pe={"*"({node:e}){if(!L.has(e.type))return;let n=[],t=[];for(let r of e.alternatives){let a=r.elements[0];r.elements.length===1&&(a.type===s.Character||a.type===s.CharacterClass||a.type===s.CharacterSet&&ve.has(a.kind))?t.push(a):(t.length&&(n.push(we(t)),t=[]),n.push(r))}t.length&&n.push(we(t)),e.alternatives=n}};function we(e){let n=A(),t=e[0];if(e.length>1){let r=U();r.elements=e,t=r}return t&&n.elements.push(t),n}var Me={CharacterClass({node:e}){let{kind:n,elements:t}=e;if(n!==S.union)return;let r=[];for(let a of t)a.type===s.Character&&r.some(i=>i.type===a.type&&i.value===a.value)||a.type===s.CharacterSet&&r.some(i=>i.type===a.type&&i.kind===a.kind&&i.negate===a.negate&&i.value===a.value)||a.type===s.CharacterClassRange&&r.some(i=>i.type===a.type&&i.min.value===a.min.value&&i.max.value===a.max.value)||r.push(a);e.elements=r}};var Ne={"*"({node:e}){if(!L.has(e.type)||e.alternatives.length<2)return;let n=[],t=!1,r=0;for(;!t;){n[r]=e.alternatives[0].elements[r];for(let o of e.alternatives){let l=o.elements[r];if(!l||!q(l.type)||!Y(l,n[r])){t=!0;break}}r++}if(n.pop(),!n.length)return;for(let o of e.alternatives)o.elements=o.elements.slice(n.length);let a=A();a.elements=[...n];let i=T();i.alternatives=e.alternatives,i.alternatives.every(o=>!o.elements.length)||a.elements.push(i),e.alternatives=[a]}};function q(e){return e===s.Assertion||e===s.Character||e===s.CharacterSet}function Y(e,n){if(e.type!==n.type)return!1;if(e.type===s.Assertion||e.type===s.CharacterSet)return e.kind===n.kind&&e.negate===n.negate;if(e.type===s.Character)return e.value===n.value;throw new Error(`Unexpected node type "${e.type}"`)}var Oe={"*"({node:e}){if(!L.has(e.type))return;let n=2,t=e.alternatives.length;if(t<n*2||t%n)return;let r=[...e.alternatives.slice(0,n).map(d=>d.elements)],a=Array.from({length:n},d=>[]),i=Array(n).fill(!1),o=Math.max(...r.map(d=>d.length));for(let d=0;d<o;d++)for(let _=0;_<n;_++)if(!i[_]){let v=r[_][d];!v||!q(v.type)||!Fn(v,e.alternatives,{prefixI:_,nodeI:d,numDiffPrefixes:n})?i[_]=!0:a[_].push(v)}if(!a.some(d=>d.length))return;let l=[],u=0;for(let d=0;d<t;d++){let _=A();_.elements=e.alternatives[d].elements.slice(a[u].length),l.push(_),u=u<n-1?u+1:0}for(let d=0;d<t/n;d++){let _=l.slice(d*n,d*n+n);for(let v=1;v<_.length;v++){let F=_[v].elements;if(F.length!==_[0].elements.length||!F.every((E,D)=>q(E.type)&&Y(E,_[0].elements[D])))return}}let m=A(),I=T(),g=[];for(let d=0;d<n;d++){let _=A();_.elements=a[d],g.push(_)}I.alternatives=g,m.elements.push(I);let C=T();C.alternatives=l.filter((d,_)=>_%n),C.alternatives.every(d=>!d.elements.length)?e.alternatives=I.alternatives:(m.elements.push(C),e.alternatives=[m])}};function Fn(e,n,{prefixI:t,nodeI:r,numDiffPrefixes:a}){for(let i=t;i<n.length;i+=a){let l=n[i].elements[r];if(!l||!Y(l,e))return!1}return!0}var Ge={Group({node:e,remove:n}){Te(e)&&n()},Quantifier({node:e,remove:n}){let t=e.element;for(;t.type===s.Quantifier;)t=t.element;Te(t)&&n()}};function Te(e){return e.type===s.Group&&e.alternatives.every(n=>!n.elements.length)}var $e={Flags({node:e}){e.extended=!1},Directive({node:e,remove:n}){e.kind===G.flags&&(De(e),Le(e)&&n())},Group({node:e}){e.flags&&(De(e),Le(e))}};function Le(e){let{flags:n}=e;return n&&!n.enable&&!n.disable?(delete e.flags,!0):!1}function De({flags:e}){e.enable&&delete e.enable.extended,e.disable&&delete e.disable.extended,Hn(e)}function Hn(e){e.enable&&!Object.keys(e.enable).length&&delete e.enable,e.disable&&!Object.keys(e.disable).length&&delete e.disable}var Ue={CharacterClass({node:e,parent:n,replaceWith:t,replaceWithMultiple:r}){let{kind:a,negate:i,elements:o}=e;if(n.type!==s.CharacterClass||a!==S.union||!o.length)return;let l=o[0];if(oe(n,{type:s.CharacterClass,kind:S.union})){n.negate=n.negate!==i,r(o,{traverse:!0});return}i||(n.kind===S.union?r(o,{traverse:!0}):oe(e)&&t(l,{traverse:!0}))}};var Be={CharacterClass({node:e,parent:n,replaceWith:t}){let{kind:r,negate:a,elements:i}=e,o=i[0];if(!(!a||r!==S.union||i.length!==1)){if(o.type===s.CharacterSet)o.negate=!o.negate,t(o);else if(n.type!==s.CharacterClass&&o.type===s.Character&&o.value===10){if(n.type===s.Quantifier&&n.kind!==w.lazy)return;t(P(h.newline,{negate:!0}))}}}};var Ke={CharacterClass({node:e,parent:n,replaceWith:t}){let{kind:r,negate:a,elements:i}=e,o=i[0];n.type===s.CharacterClass||a||r!==S.union||i.length!==1||o.type!==s.Character&&o.type!==s.CharacterSet||t(o,{traverse:!0})}};var Fe={Group({node:e,parent:n,replaceWithMultiple:t}){let{alternatives:r,atomic:a,flags:i}=e;if(r.length>1||n.type===s.Quantifier)return;let o=r[0].elements,l=!1;a?o.every(({type:u})=>ie.has(u))&&(l=!0):i||(l=!0),l&&t(o,{traverse:!0})},Quantifier({node:e}){if(e.element.type!==s.Group)return;let n=e.element;if(n.alternatives.length>1)return;let t=n.alternatives[0].elements;if(t.length!==1)return;let r=t[0];!Ee.has(r.type)||n.atomic&&!ie.has(r.type)||n.flags||(e.element=r)}};var We={CharacterSet({node:e,parent:n,root:t,replaceWith:r}){let{kind:a,negate:i,value:o}=e,l;a===h.property&&(o==="Decimal_Number"||o==="Nd")&&!t.flags.digitIsAscii&&!t.flags.posixIsAscii||a===h.posix&&o==="digit"?l=P(h.digit,{negate:i}):a===h.property&&(o==="ASCII_Hex_Digit"||o==="AHex")||a===h.posix&&o==="xdigit"?l=P(h.hex,{negate:i}):a===h.property&&(o==="White_Space"||o==="WSpace")&&!t.flags.spaceIsAscii&&!t.flags.posixIsAscii||a===h.posix&&o==="space"?l=P(h.space,{negate:i}):n.type!==s.CharacterClass&&a===h.property&&!i&&o==="Any"&&(l=P(h.any)),l&&r(l)},CharacterClass({node:e,root:n}){if(e.kind!==S.union)return;let t={rangeDigit0To9:!1,rangeAToFLower:!1,rangeAToFUpper:!1,unicodeL:!1,unicodeM:!1,unicodeN:!1,unicodePc:!1};for(let r of e.elements)r.type===s.CharacterClassRange?(t.rangeDigit0To9||=N(r,48,57),t.rangeAToFLower||=N(r,97,102),t.rangeAToFUpper||=N(r,65,70)):r.type===s.CharacterSet&&(t.unicodeL||=K(r,"L"),t.unicodeM||=K(r,"M"),t.unicodeN||=K(r,"N"),t.unicodePc||=K(r,"Pc",{supercategories:!0}));t.rangeDigit0To9&&t.rangeAToFUpper&&t.rangeAToFLower&&(e.elements=e.elements.filter(r=>!(N(r,48,57)||N(r,97,102)||N(r,65,70))),e.elements.push(P(h.hex))),t.unicodeL&&t.unicodeM&&t.unicodeN&&t.unicodePc&&!n.flags.wordIsAscii&&!n.flags.posixIsAscii&&(e.elements=e.elements.filter(r=>!K(r,["L","M","N","Pc"],{subcategories:!0})),e.elements.push(P(h.word)))}};function N(e,n,t){return e.type===s.CharacterClassRange&&e.min.value===n&&e.max.value===t}function K(e,n,t={}){let r=Array.isArray(n)?n:[n],a=[];for(let i of r)a.push(i),ee[i]&&a.push(ee[i]),t.supercategories&&ne[i]&&(a.push(ne[i]),ee[ne[i]]&&a.push(ee[ne[i]])),t.subcategories&&He[i]&&a.push(...He[i]);return e.type===s.CharacterSet&&e.kind===h.property&&!e.negate&&a.includes(e.value)}var ee={L:"Letter",M:"Mark",N:"Number",P:"Punctuation"},ne={Pc:"P"},He={L:["Ll","Lm","Lo","Lt","Lu"],M:["Mc","Me","Mn"],N:["Nd","Nl","No"]};var Re={CharacterSet({node:e}){if(e.kind!==h.property)return;let n=Wn.get(e.value);n&&(e.value=n)}},Wn=new Map([["Other","C"],["Control","Cc"],["Format","Cf"],["Unassigned","Cn"],["Private_Use","Co"],["Surrogate","Cs"],["Letter","L"],["Cased_Letter","LC"],["Lowercase_Letter","Ll"],["Modifier_Letter","Lm"],["Other_Letter","Lo"],["Titlecase_Letter","Lt"],["Uppercase_Letter","Lu"],["Mark","M"],["Combining_Mark","M"],["Spacing_Mark","Mc"],["Enclosing_Mark","Me"],["Nonspacing_Mark","Mn"],["Number","N"],["Decimal_Number","Nd"],["Letter_Number","Nl"],["Other_Number","No"],["Punctuation","P"],["punct","P"],["Connector_Punctuation","Pc"],["Dash_Punctuation","Pd"],["Close_Punctuation","Pe"],["Final_Punctuation","Pf"],["Initial_Punctuation","Pi"],["Other_Punctuation","Po"],["Open_Punctuation","Ps"],["Symbol","S"],["Currency_Symbol","Sc"],["Modifier_Symbol","Sk"],["Math_Symbol","Sm"],["Other_Symbol","So"],["Separator","Z"],["Line_Separator","Zl"],["Paragraph_Separator","Zp"],["Space_Separator","Zs"],["ASCII_Hex_Digit","AHex"],["Bidi_Control","Bidi_C"],["Case_Ignorable","CI"],["Changes_When_Casefolded","CWCF"],["Changes_When_Casemapped","CWCM"],["Changes_When_Lowercased","CWL"],["Changes_When_Titlecased","CWT"],["Changes_When_Uppercased","CWU"],["Default_Ignorable_Code_Point","DI"],["Deprecated","Dep"],["Diacritic","Dia"],["Emoji_Component","EComp"],["Emoji_Modifier","EMod"],["Emoji_Modifier_Base","EBase"],["Emoji_Presentation","EPres"],["Extended_Pictographic","ExtPict"],["Extender","Ext"],["Grapheme_Base","Gr_Base"],["Grapheme_Extend","Gr_Ext"],["Grapheme_Link","Gr_Link"],["Hex_Digit","Hex"],["IDS_Binary_Operator","IDSB"],["IDS_Trinary_Operator","IDST"],["IDS_Unary_Operator","IDSU"],["ID_Continue","IDC"],["ID_Start","IDS"],["Ideographic","Ideo"],["Join_Control","Join_C"],["Logical_Order_Exception","LOE"],["Noncharacter_Code_Point","NChar"],["Other_Alphabetic","OAlpha"],["Other_Default_Ignorable_Code_Point","ODI"],["Other_Grapheme_Extend","OGr_Ext"],["Other_ID_Continue","OIDC"],["Other_ID_Start","OIDS"],["Other_Lowercase","OLower"],["Other_Math","OMath"],["Other_Uppercase","OUpper"],["Pattern_Syntax","Pat_Syn"],["Pattern_White_Space","Pat_WS"],["Prepended_Concatenation_Mark","PCM"],["Quotation_Mark","QMark"],["Regional_Indicator","RI"],["Sentence_Terminal","STerm"],["Soft_Dotted","SD"],["Terminal_Punctuation","Term"],["Unified_Ideograph","UIdeo"],["Variation_Selector","VS"],["White_Space","WSpace"],["XID_Continue","XIDC"],["XID_Start","XIDS"]]);var je={CharacterSet({node:e,root:n,replaceWith:t}){let{kind:r,negate:a,value:i}=e,o;r===h.posix&&i==="cntrl"&&!n.flags.posixIsAscii&&(o=V("Cc",{negate:a})),o&&t(o)},CharacterClassRange({node:e,replaceWith:n}){N(e,0,1114111)&&n(V("Any"))}};var se=new Map([["alternationToClass",Pe],["dedupeClasses",Me],["extractPrefix",Ne],["extractPrefix2",Oe],["removeEmptyGroups",Ge],["removeUselessFlags",$e],["unnestUselessClasses",Ue],["unwrapNegationWrappers",Be],["unwrapUselessClasses",Ke],["unwrapUselessGroups",Fe],["useShorthands",We],["useUnicodeAliases",Re],["useUnicodeProps",je]]);function ze(e,n){let t=Rn(n),r=J(e,{flags:t.flags,rules:t.rules}),a=Object.assign(le(),t.override);Object.keys(a).forEach(u=>{a[u]||delete a[u]});let i=Object.keys(a),o={pattern:e},l=0;do{if(++l>200)throw new Error("Optimization exceeded maximum iterations; possible infinite loop");e=o.pattern;for(let u of i)Z(r,se.get(u));o=X(r)}while(e!==o.pattern);return o}function Rn(e={}){return{flags:"",override:{},rules:{},...e}}function le({disable:e}={}){let n={};for(let t of se.keys())n[t]=!e;return n}return qe(jn);})();
//# sourceMappingURL=oniguruma-parser.min.js.map
